CXX:=c++ -std=c++98
CPPFLAGS:= -Wall -Werror -Wextra -g3 -Wshadow
RM:=rm -rf

NAME = a.out

SRC_FILES = main.cpp ScalarConverter.cpp ConvertTypes.cpp

SRC_OBJECTS := $(patsubst %.cpp, %.o, $(SRC_FILES))

all: test

%.o: %.cpp
	$(CXX) -c $< $(CPPFLAGS) -o $@

$(NAME): $(SRC_OBJECTS)
	$(CXX) $(CPPFLAGS) -o $@ $^

test: $(NAME)
	./a.out "hi"; echo ""
	./a.out "65"; echo ""
	./a.out "-65"; echo ""
	./a.out "  65  "; echo ""
	./a.out "  65 word "; echo ""
	./a.out ""; echo ""
	./a.out "+inff"; echo ""
	./a.out "-inff"; echo ""
	./a.out "+inf"; echo ""
	./a.out "-inf"; echo ""
	./a.out "nan"; echo ""
	./a.out "nanf"; echo ""
	./a.out "123456789"; echo ""
	./a.out "-123456789"; echo ""
	./a.out "42.0"; echo ""
	./a.out "42.0f"; echo ""
	./a.out "340282346638528859811704183484516925440.0000000000000000"; echo ""
	./a.out "9340282346638528859811704183484516925449.0000000000000000"; echo ""
	./a.out "-179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.0000000000000000"; echo ""
	./a.out "-179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858369.0000000000000000"; echo ""

clean:
	@$(RM) $(SRC_OBJECTS)

fclean: clean
	@$(RM) $(NAME)

re: fclean all

.PHONY: all clean fclean re
